{
  "_description": "Common tools used by specialized agents. Copy relevant tools to each assistant in VAPI dashboard.",

  "tools": {
    "search_case_details": {
      "_description": "Case lookup tool - used by Pre-ID Client, Existing Client, Insurance, Medical Provider, Legal System agents",
      "type": "function",
      "function": {
        "name": "search_case_details",
        "description": "Search for case details by client name. Returns case manager info, case status, and other relevant details.",
        "parameters": {
          "type": "object",
          "properties": {
            "client_name": {
              "type": "string",
              "description": "Full name of the client to search for"
            },
            "firm_id": {
              "type": "string",
              "description": "The firm identifier (use {{firm_id}} from context)"
            },
            "client_dob": {
              "type": "string",
              "description": "Client date of birth in MM/DD/YYYY format (optional, for disambiguation)"
            },
            "incident_date": {
              "type": "string",
              "description": "Date of incident in MM/DD/YYYY format (optional, for disambiguation)"
            }
          },
          "required": ["client_name", "firm_id"]
        }
      },
      "server": {
        "url": "{{SEARCH_CASE_ENDPOINT}}"
      }
    },

    "transfer_call": {
      "_description": "Transfer/routing tool - used by most agents for transfers. ONLY call after explicit consent.",
      "type": "function",
      "function": {
        "name": "transfer_call",
        "description": "Execute a call transfer. CRITICAL: Only call this AFTER the caller explicitly consents to the transfer (says yes/yeah/sure/okay). Do NOT call if they say no or express hesitation.",
        "parameters": {
          "type": "object",
          "properties": {
            "caller_type": {
              "type": "string",
              "description": "The destination/type for the transfer",
              "enum": [
                "existing_client",
                "new_case",
                "vendor",
                "insurance",
                "spanish",
                "escalation",
                "customer_success",
                "other",
                "medical_provider",
                "legal_system_caller"
              ]
            },
            "firm_id": {
              "type": "integer",
              "description": "The firm identifier (required)"
            },
            "staff_id": {
              "type": "integer",
              "description": "Specific staff member ID for direct transfers"
            },
            "staff_name": {
              "type": "string",
              "description": "Staff member name (informational)"
            },
            "caller_name": {
              "type": "string",
              "description": "Name of the caller"
            },
            "client_name": {
              "type": "string",
              "description": "Name of the client the call is about (if different from caller)"
            },
            "reason": {
              "type": "string",
              "description": "Reason for the transfer"
            }
          },
          "required": ["caller_type", "firm_id"]
        }
      },
      "server": {
        "url": "{{TRANSFER_CALL_ENDPOINT}}"
      }
    },

    "staff_directory_lookup": {
      "_description": "RAG-based staff directory lookup - used by all agents for staff name searches",
      "type": "query",
      "function": {
        "name": "staff_directory_lookup",
        "description": "Search staff directory by name. Returns matching staff members with contact details (phone, email, staff_id). Use this to look up specific staff members when callers ask for someone by name.",
        "parameters": {
          "type": "object",
          "properties": {},
          "required": []
        }
      },
      "knowledgeBases": [
        {
          "name": "McCraw_law_group_staff_directory",
          "provider": "google",
          "model": "gemini-2.0-flash",
          "description": "McCraw Law Group Staff Directory"
        }
      ]
    }
  },

  "tool_assignments": {
    "_description": "Which tools each agent needs. Note: staff_directory_lookup only on agents that have it in production.",
    "01_greeter_classifier": ["handoff_tool", "staff_directory_lookup"],
    "02_pre_identified_client": ["search_case_details", "staff_directory_lookup", "transfer_call"],
    "03_existing_client": ["search_case_details", "staff_directory_lookup", "transfer_call"],
    "04_insurance_adjuster": ["search_case_details", "transfer_call"],
    "05_medical_provider": ["search_case_details", "transfer_call"],
    "06_new_client": ["transfer_call"],
    "07_vendor": ["transfer_call"],
    "08_direct_staff_request": ["staff_directory_lookup", "transfer_call"],
    "09_family_member": ["transfer_call"],
    "10_spanish_speaker": ["transfer_call"],
    "11_referral_source": ["staff_directory_lookup", "transfer_call"],
    "12_legal_system": ["search_case_details", "transfer_call"],
    "13_sales_solicitation": [],
    "14_fallback_line": ["transfer_call"]
  }
}
